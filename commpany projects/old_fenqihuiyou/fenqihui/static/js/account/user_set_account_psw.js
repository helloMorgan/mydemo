"use strict";controllerFunc("userSetAccountPsw","userSetAccountPswController",function(t,e,r){function o(e,o){if(t.isMsg=!1,t.pro_text=e,r(function(){t.isMsg=!0},2e3),o){var s=getTypeNative();"ios"==s?goLogin():"android"===s?android.goLogin():window.location.href=o+"?v="+Math.random()}}function s(t){if("string"!=typeof t)return"非法字符串";var e,r,o={11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江 ",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北 ",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏 ",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",91:"国外"},s=t.substr(6,4)+"/"+Number(t.substr(10,2))+"/"+Number(t.substr(12,2)),n=new Date(s),p=n.getFullYear()+"/"+Number(n.getMonth()+1)+"/"+Number(n.getDate()),a=(new Date).getTime(),i=n.getTime(),u=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],m=["1","0","X","9","8","7","6","5","4","3","2"],c=0;if(!/^\d{17}(\d|x)$/i.test(t))return!1;if(void 0===o[t.substr(0,2)])return!1;if(i>=a||s!==p)return!1;for(e=0;17>e;e++)c+=t.substr(e,1)*u[e];return r=m[c%11],r!==t.substr(17,1)?!1:!0}t.pro_text="",t.isMsg=!0,t.setPwd=function(){if(1==s(t.idCard)){if(""==t.pass)return void o("密码不能为空");t.pass.length<6?o("请输入6-16个字符的密码"):e({method:"POST",params:{token:getToken(),idCard:t.idCard,password:t.pass},url:BaseUrl+"members/setLoginPwdWithRealName"}).success(function(e){switch(e.result){case"0000":var r="../../pages/account/user_login.html";t.prompt_text="密码设置成功",o(t.prompt_text,r);break;case"1201":t.prompt_text="身份证格式不正确",o(t.prompt_text);break;case"1202":t.prompt_text="身份证号与账号不匹配",o(t.prompt_text);break;case"1003":t.prompt_text="请输入6-16个字符的密码",o(t.prompt_text);break;case"1006":t.prompt_text="密码与支付密码不能相同!",o(t.prompt_text);break;case"9999":t.prompt_text="网络忙， 请稍后再试",o(t.prompt_text);break;default:t.prompt_text="系统刷新中",o(t.prompt_text)}}).error(function(e){t.prompt_text="网络忙， 请稍后再试",o(t.prompt_text)})}else o("身份证号输入有误")}});