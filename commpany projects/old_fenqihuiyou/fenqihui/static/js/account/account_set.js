"use strict";controllerFunc("userAccountSet","userAccountSetController",function(e,a,t){function s(){var e=getTypeNative();"ios"==e?window.webkit?window.webkit.messageHandlers.realNameAuthentication.postMessage({token:n}):realNameAuthentication(n):"android"==e?android.realNameAuthentication(n):alert("无web版本服务,请在微信或者App中打开"),r=!0}function o(){a({method:"POST",url:BaseUrl+"members/findNickNameByToken",params:{token:getToken()}}).then(function(a){a.data.result==SUCCESS_CODE&&(""==a.data.nickName?(e.isName=!1,e.userName=""):(e.isName=!0,e.userName=a.data.nickName,sessionStorage.removeItem("userName"),sessionStorage.setItem("userName",e.userName)))},function(){console.log("网路异常")})}e.realName=!1,e.isHide=!0,e.prompt_text="",e.bank="",e.setPass="",e.setAccount="",e.haveCard=!0,e.isName=!0,e.setName="../../pages/account/user_set_username.html?v="+Math.random();var n=getToken();n&&a({method:"POST",params:{token:n},url:BaseUrl+"members/bankInfo"}).success(function(a){if("0000"==a.result){var t=a.bankId,s=a.bankNo;e.bandCode=s;var o="../../static/bitmap/account/bank_icon/"+t+".png";e.bankImg=o,e.haveCard=!0}else"1501"==a.result?e.haveCard=!1:e.haveCard=!1}).error(function(a){e.haveCard=!1});var r=!0;e.goto_mod=function(){s()},$(document).ready(function(){a({method:"POST",params:{token:n},url:BaseUrl+"members/searchRealNameStatus"}).success(function(a){if("4004"==a.result)return void go_page("./user_login.html");if("0000"==a.result){var t=a.accountStatus;1==a.accountStatus?(e.realName=!0,e.bank="./user_show_card.html?v="+Math.random(),e.setPass="../../pages/account/user_forget_pay_password.html?v="+Math.random(),e.setAccount="../../pages/account/user_set_login_password1.html?v="+Math.random(),0==t||(e.bank="./user_show_card.html?v="+Math.random(),e.setPass="../../pages/account/user_forget_pay_password.html?v="+Math.random())):(console.log("未实名认证"),e.realName=!1,e.setPass="#",e.setAccount="../../pages/account/user_register_account.html?v="+Math.random(),$(".setPay").bind("click",function(){$(".prompt_box p").css("font-size",".7rem"),e.$apply(function(){e.isHide=!1})}),$(".set_authentication").bind("click",function(){$(".prompt_box p").css("font-size","1rem"),e.$apply(function(){e.isHide=!1})}))}else e.bank="",e.setPass="",e.setAccount="",console.log("网络异常")}).error(function(a){e.bank="",e.setPass="",e.setAccount="",console.log("网络异常")})}),o(),e.back=function(){sessionStorage.getItem("save")?history.go(-sessionStorage.getItem("save")):history.go(-1)}});