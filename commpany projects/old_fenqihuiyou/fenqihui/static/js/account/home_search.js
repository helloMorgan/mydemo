"use strict";var app=controllerFunc("searchApp","searchCtrl",function(e,a,r){function s(r){a({method:"POST",url:BaseUrl+"product1/searchInfo",params:{info:r||e.address}}).success(function(a){if(a.result==SUCCESS_CODE)if(a.data.length>0){if(!r){if(e.searchArray.length>0){for(var s=!0,t=0;t<e.searchArray.length;t++)if(e.address==e.searchArray[t]){e.searchArray.splice(t,1),e.searchArray.unshift(e.address),s=!1;break}s&&e.searchArray.unshift(e.address)}else e.searchArray.push(e.address);var c=e.searchArray.join(",");localStorage.removeItem("sh"),localStorage.setItem("sh",c)}var i=JSON.stringify(a.data);sessionStorage.removeItem("data"),sessionStorage.setItem("data",i),go_page("../../pages/travel/travel_product_list.html",[{laName:r||e.address}])}else go_page("../../pages/account/search_fail.html");else alert(a.message)})}e.cancel=!1,e.search=!0,e.isHistory=!1,e.isThink=!0,e.isHis=!0;var t=localStorage.getItem("sh");if(t){e.isHis=!1;var c=t.split(",");e.searchArray=c}else e.isHis=!0,e.searchArray=[];e.$watch("address",function(a,r){a&&""!=a?(e.cancel=!0,e.search=!1):(e.cancel=!1,e.search=!0)},!1),e.delValue=function(){e.address=""},e.goSearch=function(){s()},$("form").on("submit",function(a){return e.address&&""!=e.address&&s(),!1}),e.hisSearch=function(e){s(e)},e.delHis=function(){localStorage.removeItem("sh"),e.searchArray=[],e.isHis=!0}});