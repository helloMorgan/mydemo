"use strict";var app=controllerFunc("mainPage","mainController",function(a,e,t){function o(){({head:$(".route-search").eq(0),offsetTop:$(".route-search").eq(0).offset().top,search:$("#route_search")});$("#main-wrap section").css("display","none"),$("#foot_check1").siblings("span").css("color","red"),a.dialog=new Dialog(DIALOG_DIALOG,"请在微信中打开此功能")}function n(){new Swiper(".swiper-container",{direction:"horizontal",autoplay:5e3,loop:!0,freeModeMomentumBounce:!1,pagination:".swiper-pagination"})}function r(){a.isRealName=!0,u?e({method:"POST",params:{token:u},url:BaseUrl+"members/searchRealNameStatus"}).then(function(e){e.data.result===SUCCESS_CODE?"1"===e.data.status&&"1"===e.data.accountStatus&&(a.isRealName=!1):a.isRealName=!0},function(e){console.error("数据请求失败"),a.isRealName=!0}):a.isRealName=!0}function l(){e({method:"POST",url:BaseUrl+"product1/searchLabelList"}).then(function(e){e.data.result===SUCCESS_CODE&&(a.labelArray=e.data.data)},function(a){console.error("数据请求失败")})}function i(){e({method:"POST",params:{type:1,pageSize:1},url:BaseUrl+"product1/searchCarouselImgList"}).then(function(e){console.log("轮播图数据"),console.log(e),e.data.result===SUCCESS_CODE&&(a.bannerList=e.data.data,t(function(){n()},500))},function(a){console.error("数据请求失败")})}function s(){e({method:"POST",url:BaseUrl+"product1/searchProductList",params:{isHot:2,pageSize:d,id:0}}).then(function(e){e.data.result===SUCCESS_CODE&&(e.data.data||e.data.data.length)&&(10==e.data.data.length&&(p=!1,d++),a.proItems=a.proItems.concat(e.data.data))},function(a){console.error("数据请求失败")})}function c(){a.toDetail=function(a){go_page("../travel/travel_detail_info.html",[{pId:a}])},a.searchBourn=function(a,e){go_page("../../pages/travel/travel_product_list.html",[{lbId:a},{laName:e},{source:"label"}])},a.searchDetail=function(a){go_page("../travel/travel_detail_info.html",[{pId:a.pId}])},a.toRealName=function(){u?a.isRealName&&go_page("../travel/travel_upload_cdCard.html"):go_page("../account/user_login.html")}}var u=getToken(),d=1;a.proItems=[],a.loginTag=!0,o(),i(),r(),l(),s(),c(),a.goSearch=function(){go_page("../../pages/account/home_search.html")};var p=!0;$(window).scroll(function(){var a=$(this).scrollTop(),e=$(document).height(),t=$(this).height();20>e-a-t&&0==p&&(p=!0,s())})});