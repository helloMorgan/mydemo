"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};controllerFunc("ngScope","ngController",function(e,t){function o(){t({method:"POST",params:{pIds:a,pageSize:1,pageNum:1,type:9},url:BaseUrl+"product1/searchProductImgList"}).then(function(t){t.data.result===SUCCESS_CODE&&(e.imgPath=t.data.data[0].imgUrl)},function(){console.error("获取订单详情图失败")})}var n=JSON.parse(localStorage.getItem("orderDetailInfo")),a=n.pId,l=n.oMealsId,c=n.adultNum,r=n.childNum,i=n.oldNum,u=n.oTotalDuration,s=n.calTotalPrice,d=n.downPayment,m=n.installmentEachPrice,p=n.totalMoney,y=n.oTotalSxfMoney,g=n.dfcNum,f=n.oTotalDfcMoney,T=n.rCode,b=n.title,h=n.subTitle,D=n.comboName,N=n.installment,S=n.departureDate,k=n.shopNum,I=n.creditMoney,M=getTypeNative();sessionStorage.setItem("rateDes",n.rateDescription),e.goInstallment=function(){go_page("../../pages/travel/travel_installment_contract_text.html",[{flag:"0"},{pId:a}])},e.appType=getTypeNative();var v=document.getElementById("myModal"),C=document.getElementById("myImg"),P=document.getElementById("img01"),_=document.getElementById("caption");C.onclick=function(){v.style.display="block",P.src=this.src,P.alt=this.alt,_.innerHTML=this.alt};var E=document.getElementsByClassName("close")[0];E.onclick=function(){v.style.display="none"},o(),e.agreeDeal=!0,e.clicNum=2,e.pTitle=b,e.subTitle=h,e.downPayment=d,e.comboName=D,e.installment=N,e.departureDate=S,e.shopNum=k,e.creditMoney=I,e.durationMoney=m,e.oTotalDuration=u,e.readDeal=function(t){angular.element(t.target).toggleClass("deal-select"),e.agreeDeal=e.clicNum%2,e.canCreate=!e.agreeDeal,e.clicNum++},console.log("undefined"==typeof u?"undefined":_typeof(u)),e.createOrder=function(){var e={token:getToken(),oPid:a,oMealsId:l,oTicketOldNum:i,oTicketYoungNum:c,oTicketChildrenNum:r,oTotalFirstPrice:d,oTotalPrice:s,oTotalDuration:u,oDurationMoney:m,totalMoney:p,oTotalDfcMoney:f,oTotalSxfMoney:y*u,dfcNum:g};T&&function(){e.contractNum=T}(),t({method:"POST",params:e,url:BaseUrl+"order/createOrder/v1"}).then(function(e){e.data.result===SUCCESS_CODE&&(GetQueryString("isPay")?go_page("./travel_checkstand.html",[{page:"combo"},{oId:e.data.oId}]):$(".layer").css("display","block"))},function(){console.error("订单创建失败")})},e.showDialog=function(){e.isDialog={display:"block"},$(".travel-info-cover").on("click",function(){e.$apply(function(){e.isDialog={display:"none"}})})},e.goBack=function(){"android"==M?android.backAccount():"ios"==M?backAccount():window.history.back()},e.promptClose=function(){$(".layer").css("display","none")},e.backAccount=function(){"ios"==e.appType?backAccount():"android"==e.appType?android.backAccount():window.location.href="../../pages/account/user_personal.html"},e.submitOrder=function(){e.agreeDeal&&e.createOrder()}});