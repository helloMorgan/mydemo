"use strict";controllerFunc("myDetails","myDetailsCtrl",function(t,a,e,s){function o(t,e){var o=s.defer();return a({url:t,method:"POST",params:e}).success(function(t){"0000"==t.result&&o.resolve(t)}).error(function(t){o.reject(t)}),o.promise}function d(){return getToken()?void a({method:"POST",params:{token:getToken()},url:BaseUrl+"members/searchRealNameStatus"}).then(function(t){t.data.result===SUCCESS_CODE&&"1"===t.data.status&&"1"===t.data.accountStatus&&(i=!0)},function(t){return console.error("数据请求失败"),!1}):!1}var n=GetQueryString("pId");t.data={popup:"",stages:"","switch":!1,dataList:[],businessName:"",firstPrice:"",monthPayLowest:"",duration:"",select:"",selectList:[],imgUrl:"",Text:!1};var i=!1;t.dataHttp=function(){var a={pId:n};o(BaseUrl+"fqhpro/getProductDetailByPid",a).then(function(a){t.data.dataList=a.data,t.data.businessName=t.data.dataList.sName,t.data.firstPrice=t.data.dataList.firstPrice,t.data.monthPayLowest=t.data.dataList.monthPayLowest.mPay,t.data.duration=t.data.dataList.monthPayLowest.duration,t.data.select=t.data.dataList.select,t.data.selectList=t.data.dataList.selectList,t.data.pId=t.data.dataList.pId,t.data.pName=t.data.dataList.title,t.data.sId=t.data.dataList.sId,document.getElementById("text").innerHTML=t.data.dataList.pictureInfo,document.getElementById("mainDetails_title").innerHTML=t.data.dataList.serviceInfo,t.data.imgUrl=OSS_IMG_URL+t.data.dataList.url,t.data.dataList.serviceInfo?t.data.Text=!0:t.data.Text=!1})},t.dataHttp(),t.popupVanish=function(){t.data.popup=!1,t.data.stages=!1},t.stages=function(){t.data.popup=!0,t.data.stages=!0},t.chooseTab=function(a){1==a?(document.getElementsByClassName("mainDetails_chooseTwo")[0].style.borderBottomColor="#D8D8D8",document.getElementsByClassName("mainDetails_chooseOne")[0].style.borderBottomColor="red",document.getElementsByClassName("mainDetails_chooseOne")[0].style.color="red",document.getElementsByClassName("mainDetails_chooseTwo")[0].style.color="black",t.data["switch"]=!1):(document.getElementsByClassName("mainDetails_chooseOne")[0].style.borderBottomColor="#D8D8D8",document.getElementsByClassName("mainDetails_chooseTwo")[0].style.borderBottomColor="red",document.getElementsByClassName("mainDetails_chooseOne")[0].style.color="black",document.getElementsByClassName("mainDetails_chooseTwo")[0].style.color="red",t.data["switch"]=!0)},d(),t.load=function(){getToken()?i?go_page("../../pages/travel/decoration_order.html",[{urlState:1},{selectShope:t.data.businessName},{pName:t.data.pName},{sId:t.data.sId},{pId:t.data.pId}]):(alert("请先进行实名认证"),go_page("../travel/travel_upload_cdCard.html")):go_page("../../pages/account/new_login.html")}});