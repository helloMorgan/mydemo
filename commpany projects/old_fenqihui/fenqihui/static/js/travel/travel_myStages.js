"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};controllerFunc("myStages","myStagesCtrl",function(t,e,o,a){function n(){d(),m()}function r(){var t=getTypeNative();"ios"==t?window.webkit?window.webkit.messageHandlers.realNameAuthentication.postMessage({token:TOKEN}):realNameAuthentication(TOKEN):"android"==t?android.realNameAuthentication(TOKEN):go_page("../../pages/travel/travel_upload_cdCard.html")}function s(t,o){var n=a.defer();return e({url:t,method:"POST",params:o}).success(function(t){n.resolve(t)}).error(function(t){n.reject(t)}),n.promise}function c(){var t=getToken();e({method:"POST",params:{token:t},url:BaseUrl+"members/searchRealNameStatus"}).success(function(t){if("4004"==t.result){var e="./new_login.html";return void prompt2("登陆失效请先登陆",e)}if("0000"==t.result){t.accountStatus;1==t.accountStatus?(console.log("实名认证成功"),go_page("../../pages/account/user_increase_star.html")):(console.log("未实名认证"),r())}else prompt("网络忙")}).error(function(t){prompt("网络忙")})}function d(){e({method:"POST",params:{token:getToken()},url:BaseUrl+"members/searchCredit"}).then(function(e){if("0000"==e.data.result){t.startInfo=parseInt(e.data.data.startInfo),console.error(t.startInfo);for(var o=0;o<t.startInfo;o++)$(".title_star").find("i").eq(o).html("&#xe650;")}},function(t){console.error("数据请求失败")})}function u(){var t=0,e=0,o=0;return document.body&&(e=document.body.scrollTop),document.documentElement&&(o=document.documentElement.scrollTop),t=e-o>0?e:o}function i(){var t=0,e=0,o=0;return document.body&&(e=document.body.scrollHeight),document.documentElement&&(o=document.documentElement.scrollHeight),t=e-o>0?e:o}function l(){var t=0;return t="CSS1Compat"==document.compatMode?document.documentElement.clientHeight:document.body.clientHeight}function m(){e({method:"POST",params:{token:getToken()},url:BaseUrl+"members/findNickNameByToken"}).then(function(e){e.data.result===SUCCESS_CODE&&(t.accountName=e.data.nickName)},function(t){console.error("数据请求失败")})}t.data={popup:"",stages:"","switch":!1,aClass:!1,list:[],firstPay:"",prepay:"",time:"",shouldPay:"",delayPay:"",payTime:"",residueTime:"",overdueTime:"",data:"",dataList:[],num:1,monthList:[],overdueFeeInit:0},n(),t.popupVanish=function(){t.data.popup=!1,t.data.stages=!1},t.stages=function(){t.data.popup=!0,t.data.stages=!0},t.chooseTab=function(e){t.data.aClass=!t.data.aClass,1==e?(document.getElementsByClassName("mainDetails_chooseOne")[0].style.borderBottomColor="#D8D8D8",document.getElementsByClassName("mainDetails_chooseTwo")[0].style.borderBottomColor="#00ceb7",t.data["switch"]=!1):(document.getElementsByClassName("mainDetails_chooseTwo")[0].style.borderBottomColor="#D8D8D8",document.getElementsByClassName("mainDetails_chooseOne")[0].style.borderBottomColor="#00ceb7",t.data["switch"]=!0)},t.load=function(){window.location.href="http://localhost:5000/fenqihui/pages/travel/decoration_order.html"},t.goAccountSet=function(){go_page("../account/user_set.html")},t.goCredit=function(){c()},t.goMonthPay=function(t){"0"==t.isPaid&&go_page("../travel/travel_checkstand.html",[{oId:t.oId},{rId:t.rIds},{isOverdue:t.isOverdue}])},t.httpData=function(){console.log("undefined"==typeof token?"undefined":_typeof(token)),s(BaseUrl+"fenqh/monthPayOrder",{token:getToken()}).then(function(e){"0000"==e.result&&(t.data.monthList=e.data)},function(t){console.log(t)})},t.httpData(),t.myData=function(e){s(BaseUrl+"fqhord/getOrderListByToken",{token:getToken(),start:e,limit:10}).then(function(e){if(console.log(e),"0000"==e.result){t.data.num++,""==e.result;for(var o=0;o<e.data.length;o++)t.data.dataList.push(e.data[o]);console.log(t.data.dataList)}},function(t){console.log(t)})},t.myData(t.data.num),t.isHide=function(t){return"303"==t.orderStatus||"108"==t.orderStatus?!0:!1},t.isShow=function(t){return"104"==t.orderStatus?!0:!1},t.toPay=function(t){"0"==t.isPaid&&go_page("./travel_checkstand_first.html",[{oId:t.oId},{oNo:t.oNo}])},window.onscroll=function(){u()+l()==i()&&(t.data["switch"]||t.myData(t.data.num))},t.datum=function(t){"108"==t.orderStatus?go_page("./travel_upload_contract2.html",[{conId:t.conId},{isQianyue:0},{processStatus:t.orderStatus},{oId:t.oId},{pType:t.pType}]):"303"==t.orderStatus?go_page("./travel_view_bcontract.html",[{conId:t.conId},{isQianyue:0},{processStatus:t.orderStatus},{oId:t.oId},{pType:t.pType}]):go_page("./travel_view_contract.html",[{conId:t.conId},{isQianyue:0},{processStatus:t.orderStatus},{oId:t.oId},{pType:t.pType}])},t.details=function(t){103==t.orderStatus||201==t.orderStatus||106==t.orderStatus?go_page("../../pages/account/order_detail.html",[{oId:t.oId},{conId:t.conId}]):go_page("../../pages/account/order_detail.html",[{oId:t.oId},{conId:t.conId},{processStatus:t.orderStatus},{isQianyue:"0"}])}});