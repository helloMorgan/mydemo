"use strict";var personalOrder=1,toTravel=3,app=controllerFunc("userPersonal","userPersonalController",function(e,t){function r(){var e=getTypeNative();"ios"==e?window.webkit?window.webkit.messageHandlers.realNameAuthentication.postMessage({token:TOKEN}):realNameAuthentication(TOKEN):"android"==e?android.realNameAuthentication(TOKEN):alert("无web版本服务，请在App或微信端打开")}function o(){t({method:"POST",params:{token:getToken()},url:BaseUrl+"members/searchRealNameStatus"}).success(function(e){if("4004"==e.result){var t="./user_login.html";return void prompt2("登陆失效请先登陆",t)}if("0000"==e.result){e.accountStatus;1==e.accountStatus?(console.log("实名认证成功"),go_page("../../pages/account/user_increase_star.html")):(console.log("未实名认证"),r())}else prompt("网络忙")}).error(function(e){prompt("网络忙")})}function a(){$("#my_order").css("display","block").addClass("travel_order_active"),n(personalOrder),n(toTravel)}function s(){t({method:"POST",params:{token:e.token},url:BaseUrl+"members/searchCredit"}).then(function(t){if("0000"==t.data.result){e.startInfo=parseInt(t.data.data.startInfo);for(var r=0;r<e.startInfo;r++)$(".my_credit").find("i").eq(r).html("&#xe650;")}},function(e){console.error("数据请求失败")})}function n(r){t({method:"POST",params:{token:e.token,type:r},url:BaseUrl+"order/findOrderList/v1"}).then(function(t){t.data.result===SUCCESS_CODE&&(e.userName=t.data.loginName,e.creditLeaveMoney=t.data.creditLeaveMoney,1===r?e.myOrder=t.data.orderList:3===r&&(e.waitGo=t.data.orderList,e.dCfNum=t.data.dCfNum))},function(e){console.error("数据请求失败")})}function d(){t({method:"POST",params:{token:e.token},url:BaseUrl+"repaymentPlan/findMonthOrder/v1"}).then(function(t){(t.data.result=SUCCESS_CODE)&&(e.monthBill=t.data.data)},function(e){})}function l(){t({method:"POST",url:BaseUrl+"product1/searchProductCollectionList",params:{token:getToken(),pageSize:"1"}}).then(function(t){t.data.result===SUCCESS_CODE&&(e.items=t.data.data)},function(e){console.error("数据请求失败")})}function i(){function e(){$(".travel_order_waiting").addClass("travel_order_active").siblings().removeClass("travel_order_active"),$("#to_set").removeClass("not_show"),$("#my_order").addClass("not_show"),$("#my_bill").addClass("not_show"),$("#my_order").css("display","none"),n(toTravel)}$(".my_order").bind("click",function(){$(".travel_order_myOrder").addClass("travel_order_active").siblings().removeClass("travel_order_active"),$("#my_order").removeClass("not_show"),$("#to_set").addClass("not_show"),$("#my_bill").addClass("not_show"),$(".travel-walk-list").addClass("not_show"),$("#my_order").css("display","block")}),$(".my_bill").bind("click",function(){$(".travel_order_monOrder").addClass("travel_order_active").siblings().removeClass("travel_order_active"),$("#my_bill").removeClass("not_show"),$("#my_order").addClass("not_show"),$("#to_set").addClass("not_show"),$(".travel-walk-list").addClass("not_show"),$("#my_order").css("display","none")}),$(".to_set").bind("click",function(){$(".travel_order_waiting").addClass("travel_order_active").siblings().removeClass("travel_order_active"),$("#to_set").removeClass("not_show"),$("#my_order").addClass("not_show"),$("#my_bill").addClass("not_show"),$("#to_set").addClass("not_show"),$(".travel-walk-list").addClass("not_show"),$("#my_order").css("display","none")}),$(".to_collection").bind("click",function(){$(".travel_order_collection").addClass("travel_order_active").siblings().removeClass("travel_order_active"),$(".travel-walk-list").removeClass("not_show"),$("#my_order").addClass("not_show"),$("#my_bill").addClass("not_show"),$("#to_set").addClass("not_show"),$("#my_order").css("display","none")}),$(".wait-go").bind("click",e),$("#to_set_out").bind("click",e)}getToken()||(alert("您尚未登录,请先登录"),window.location.href="./user_login.html"),i(),e.userName="*****",e.creditLeaveMoney="*****",e.myOrder=[],e.monthBill=[],e.waitGo=[],e.orderShow={display:"block"},e.orderHidden={display:"none"},e.token=getToken(),e.goTo=function(){go_page("../../pages/recommended/recommended_index.html")},e.goCredit=function(){o()},a(),s(),d(),l(),e.waitShow={display:"inline-block"},e.isShow=function(e){return 104==e.order.processStatus||105==e.order.processStatus?{display:"block"}:{display:"none"}},e.isHidden=function(e){return 104==e.order.processStatus||105==e.order.processStatus?{display:"none"}:{display:"block"}},e.isShowSubmit=function(e){return"108"==e.order.processStatus||"110"==e.order.processStatus?{display:"block"}:{display:"none"}},e.isShowSubmitCont=function(e){return"111"==e.order.processStatus?{display:"block"}:{display:"none"}},e.productPay=function(e){localStorage.setItem("myOrderPay",JSON.stringify(e)),go_page("../../pages/travel/travel_checkstand.html",[{oId:e.order.oId}])},e.productMonthPay=function(e){go_page("../../pages/travel/travel_checkstand.html",[{oId:e.oId},{rId:e.rId}])},e.checkInfo=function(e){103==e.order.processStatus||201==e.order.processStatus||106==e.order.processStatus?go_page("../../pages/travel/travel_order_state_details.html",[{oId:e.order.oId}]):go_page("../../pages/travel/travel_order_sucess_details.html",[{oId:e.order.oId},{processStatus:e.order.processStatus},{isQianyue:"0"}])},e.toDetail=function(e){go_page("../travel/travel_detail_info.html",[{pId:e}])},e.submitContract=function(e){go_page("../../pages/travel/travel_upload_contract.html",[{onLine:"onLine"},{oid:e.order.oId},{processStatus:e.order.processStatus},{isQianyue:"0"}])}});app.filter("orderStatus",function(){return function(e){switch(e){case"101":case"102":return"待确认";case"103":return"预定失败";case"104":case"105":return"待支付";case"106":return"订单已取消";case"107":case"110":case"111":return" 预定中";case"108":return" 待签约";case"109":case"304":case"305":case"306":return"待审核";case"201":return"出行失败 ";case"202":return"出行成功";case"203":case"302":case"401":case"402":return"待出行";case"204":return"待返回";case"303":return"待确认";case"501":return"还款中";case"502":return"还款中（已逾期）";case"503":return"已还款";case"504":return"还款失败";case"601":return"纠纷中";case"602":return"纠纷已解决"}}});