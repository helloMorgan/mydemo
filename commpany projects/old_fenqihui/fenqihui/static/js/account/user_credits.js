"use strict";var app=controllerFunc("credits","creditsController",function(e,t,o){function r(t){o(function(){e.$apply(function(){e.pro_text="亲，"+t})},100),$("#layer").css("display","block"),$(".close_btn").click(function(){$("#layer").css("display","none")})}e.isDisplay=!1,e.prompt_text="",e.prompt=!1,e.userError=!1,e.path="../../static/bitmap/pays/pays_fail_03.png",e.pro_text="错误",e.sendData={amount:""},t({method:"POST",params:{token:getToken()},url:BaseUrl+"members/searchCredit"}).success(function(t){if("0000"==t.result){var o=t.data;e.totalMoney=o.totalMoney,e.freezeMoney=o.freezeMoney,e.leaveMoney=o.leaveMoney}else e.pro_text="网络忙，请稍后再试",e.userError=!0}).error(function(t){e.pro_text="网络忙，请稍后再试",r(e.pro_text)}),e.closeBtn=function(){e.userError=!1},e.promotion=function(){e.isDisplay=!0},e.closeDisplay=function(){e.isDisplay=!1},e.increaseAmount=function(){var o=$(".amount_text").val();return o=o.replace(/,/g,""),""==o||null==o?void r("请输入申请金额"):isNaN(o)?void r("请输入正确的金额"):o.length<=3?void r("要申请就申请多一点嘛"):void t({method:"POST",params:{token:getToken(),money:o},url:BaseUrl+"members/promoteCredit"}).success(function(t){"0000"==t.result?(e.path="../../static/bitmap/pays/pays_success.jpg",e.message="恭喜您，成功申请，请等待审核",e.prompt=!0):"1008"==t.result?(e.message="很遗憾，请先完成实名认证",e.prompt=!0):"1009"==t.result?(e.message="很遗憾，您有一笔申请正在审核中",e.prompt=!0):"1010"==t.result&&(e.message="您的初步授信额度正在审批中!",e.prompt=!0)}).error(function(e){})},e.closePro=function(){e.prompt=!1,e.isDisplay=!1},e.backIndex=function(){go_page("../recommended/recommended_index.html")}}),formatStr=function(){var e=$(".amount_text").val();return e?void $(".amount_text").val(parseFloat(e).toLocaleString()):!1};